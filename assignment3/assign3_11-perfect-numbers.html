<!DOCTYPE html>
<html lang=en>
<head>
	<title>assign3_11</title>
	<meta charset=utf-8>
	<script type="text/javascript">

		function isPrime(n) { // thanks internet http://www.javascripter.net/faq/numberisprime.htm
		 if (isNaN(n) || !isFinite(n) || n%1 || n<2) return false; 
		 if (n%2==0) return (n==2);
		 if (n%3==0) return (n==3);
		 var m=Math.sqrt(n);
		 for (var i=5;i<=m;i+=6) {
		  if (n%i==0)     return false;
		  if (n%(i+2)==0) return false;
		 }
		 return true;
		}

		function isPerfect(n) // thanks internet http://rosettacode.org/wiki/Perfect_numbers#JavaScript
		{
		 var sum = 1, i, sqrt=Math.floor(Math.sqrt(n));
		 for (i = sqrt-1; i>1; i--)
		 {
		  if (n % i == 0) {
		   sum += i + n/i;
		  }
		 }
		 if(n % sqrt == 0)
		  sum += sqrt + (sqrt*sqrt == n ? 0 : n/sqrt);
		 return sum === n;
		}

		function getFactors(integer){ // thanks internet http://codereview.stackexchange.com/a/31621
		  var factors = [],
		  quotient = 0;

		  for(var i = 1; i <= integer; i++){
		    quotient = integer/i;

		    if(quotient === Math.floor(quotient)){
		      factors.push(i); 
		    }
		  }
		  return factors;
		}

		window.onload = function()
		{
			var outputArea = document.getElementById('output');
			var outputString = "";
			var factors = [];

			outputString += "All perfect number between 1 and 1000 with their factors:\n";
			for(var i = 1; i <= 1000; i++)
			{
				if(isPerfect(i))
				{
					outputString += i + " (";
					factors = getFactors(i);
					for(var j = 0; j < factors.length; j++)
					{
						if(j === (factors.length - 1))
						{
							outputString += " = " + factors[j];
						}
						else if(j === (factors.length - 2))
						{
							outputString += factors[j];
						}
						else
						{
							outputString += factors[j] + " + ";
						}
						
					}
					outputString += ")\n";
				}
			}

			outputString += "\nAll Prime numbers between 1 and 10000:\n";
			for(var k = 1; k <= 10000; k++)
			{
				if(isPrime(k))
				{
					outputString += k + "\n";
				}
			}

			outputArea.innerHTML = outputString;
		}
	</script>
</head>
<body style="font-family:sans-serif;">
<h1>Perfect Numbers / Prime Numbers</h1>
<hr>

<textarea id="output" rows="20" cols="80"></textarea>
</body>
</html>